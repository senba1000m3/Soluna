# 🧪 共鳴配對功能測試指南

## 快速測試步驟

### 1. 啟動後端服務
```bash
cd Lunaris
python main.py
```

確認後端運行在 `http://localhost:8000`

### 2. 啟動前端服務
```bash
cd Solaris
npm run dev
```

前端通常運行在 `http://localhost:5173`

### 3. 訪問共鳴配對頁面
在瀏覽器中打開 `http://localhost:5173/synergy`

## 測試用例

### 測試案例 1: 高相似度用戶
**輸入:**
- 用戶 A: `senba1000m3`
- 用戶 B: 另一個動畫迷用戶

**預期結果:**
- 顯示共鳴指數
- 雷達圖正常渲染
- 共同動畫列表有數據
- 推薦列表有內容

### 測試案例 2: 低相似度用戶
**輸入:**
- 用戶 A: 主要看動作番的用戶
- 用戶 B: 主要看日常番的用戶

**預期結果:**
- 較低的共鳴指數（< 60）
- 品味分歧列表顯示明顯差異
- 推薦列表較長（互相推薦的機會多）

### 測試案例 3: 錯誤處理
**輸入:**
- 用戶 A: `nonexistentuser12345`
- 用戶 B: `senba1000m3`

**預期結果:**
- 顯示錯誤訊息
- 不會崩潰
- 錯誤提示清楚

## 功能檢查清單

### 基礎功能
- [ ] 輸入框正常運作
- [ ] 按鈕 hover 效果
- [ ] Loading 動畫顯示
- [ ] 錯誤處理正確

### 數據展示
- [ ] 用戶頭像正確顯示
- [ ] 共鳴指數計算正確
- [ ] 統計數據卡片顯示
- [ ] 快速指標卡片正確

### 標籤頁功能
- [ ] 標籤切換流暢
- [ ] 品味分析標籤：雷達圖渲染
- [ ] 品味分析標籤：共同類型列表
- [ ] 共同作品標籤：動畫卡片顯示
- [ ] 共同作品標籤：評分對比清楚
- [ ] 推薦標籤：雙向推薦列表
- [ ] 分歧標籤：差異排序正確

### 視覺效果
- [ ] 漸變色正確應用
- [ ] 卡片 hover 效果
- [ ] 響應式佈局（手機、平板、桌面）
- [ ] 顏色編碼清晰（藍色 vs 青色）

### 雷達圖測試
- [ ] 圖表正常渲染
- [ ] 圖例顯示用戶名稱
- [ ] Tooltip 互動正常
- [ ] 數據正規化到 0-100
- [ ] 至少顯示 6-8 個類型

## API 端點測試

### 使用 curl 測試
```bash
curl -X POST http://localhost:8000/pair_compare \
  -H "Content-Type: application/json" \
  -d '{
    "user1": "senba1000m3",
    "user2": "TrashTaste"
  }'
```

### 預期返回結構
```json
{
  "user1": { "name": "...", "avatar": {...} },
  "user2": { "name": "...", "avatar": {...} },
  "compatibility_score": 75.5,
  "common_genres": [...],
  "common_anime": [...],
  "common_count": 42,
  "disagreements": [...],
  "avg_score_difference": 1.2,
  "radar_data": {
    "labels": ["Action", "Comedy", ...],
    "user1": [80, 60, ...],
    "user2": [70, 85, ...]
  },
  "stats": {
    "user1": {...},
    "user2": {...}
  },
  "recommendations": {
    "for_user1": [...],
    "for_user2": [...]
  }
}
```

## 常見問題排查

### 問題 1: 雷達圖不顯示
**原因:** recharts 未安裝
**解決:**
```bash
npm install recharts
```

### 問題 2: CORS 錯誤
**原因:** 後端 CORS 設定
**解決:** 確認 `main.py` 中有正確的 CORS 中間件設定

### 問題 3: 私密列表錯誤
**原因:** 用戶設定列表為私密
**解決:** 使用有公開列表的用戶進行測試

### 問題 4: 載入時間過長
**原因:** AniList API 請求較多
**預期行為:** 首次載入可能需要 3-10 秒

## 性能檢查

- [ ] 首次載入時間 < 10 秒
- [ ] 標籤切換響應 < 100ms
- [ ] 動畫流暢（60fps）
- [ ] 記憶體使用正常

## 瀏覽器兼容性

- [ ] Chrome/Edge (推薦)
- [ ] Firefox
- [ ] Safari
- [ ] 手機瀏覽器

## 測試建議用戶

以下是一些公開列表的 AniList 用戶，可用於測試：

1. `senba1000m3` - 測試用戶
2. `TrashTaste` - 知名 Podcast
3. `Gigguk` - YouTuber
4. `TheAnimeMan` - YouTuber

## 回歸測試

每次修改後應測試：
1. 基礎配對功能
2. 所有四個標籤頁
3. 錯誤處理
4. 響應式佈局

## 報告 Bug

發現問題時，請記錄：
- 使用的用戶名稱
- 瀏覽器和版本
- 錯誤訊息截圖
- 控制台錯誤日誌
- 重現步驟

---

**測試完成後，可以開始使用並享受共鳴配對功能！** 🎉