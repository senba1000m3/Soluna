# 🎯 共鳴配對 (Synergy) 功能說明

## 📊 功能概覽

共鳴配對是一個深度分析兩位 AniList 用戶動畫品味契合度的功能。透過多維度數據分析，提供全面的配對洞察。

## ✨ 主要功能

### 1. **基礎配對分析**
- **共鳴指數**: 0-100 分的契合度評分
- 使用 Cosine Similarity 演算法比較用戶的類型偏好向量
- 即時的個性化配對評語

### 2. **統計數據對比** 📈
並排顯示兩位用戶的核心數據：
- 總動畫數量
- 已完成作品數
- 平均評分
- 觀看集數總計

### 3. **快速指標卡片**
三個關鍵數據一目了然：
- 共同觀看作品數量
- 共同喜好類型數量
- 平均評分差異

### 4. **品味分析標籤頁**

#### 📊 類型偏好雷達圖
- 視覺化展示 8 個主要類型的偏好強度
- 雙色雷達圖清楚對比兩位用戶
- 互動式圖表，可 hover 查看詳細數值
- 自動正規化到 0-100 分度

#### ⚡ 共同喜好領域
- 列出雙方都喜愛的動畫類型
- 按共鳴強度排序（幾何平均數）
- 最多顯示前 5 個類型

### 5. **共同作品標籤頁** 🎬

展示雙方都看過的動畫作品：
- **封面圖預覽**: 吸引視覺的卡片式排列
- **雙重評分顯示**: 藍色（用戶1）/ 青色（用戶2）
- **評分差異標註**: 快速識別評價不同的作品
- **排序邏輯**: 依照雙方平均評分排序
- 最多顯示前 20 部作品

**視覺設計特點**:
- 卡片 hover 效果
- 響應式網格佈局
- 色彩編碼評分系統

### 6. **互相推薦標籤頁** 💝

#### 推薦給用戶 2
- 展示用戶 1 看過且評分 ≥ 8 分的作品
- 用戶 2 尚未觀看的高分動畫

#### 推薦給用戶 1
- 展示用戶 2 看過且評分 ≥ 8 分的作品
- 用戶 1 尚未觀看的高分動畫

**卡片內容**:
- 動畫封面
- 評分徽章（金色星星）
- 最多 2 個類型標籤
- 每方最多推薦 10 部

### 7. **品味分歧標籤頁** ⚠️

找出評分差異最大的共同作品：
- **排行榜式設計**: 由大到小排列
- **雙頭像評分對比**: 視覺化評分差距
- **橙色差異高亮**: 強調分歧程度
- 最多顯示前 5 部分歧作品

## 🎨 視覺設計特色

### 配色方案
- **用戶 1**: 藍色系 (#3B82F6)
- **用戶 2**: 青色系 (#14B8A6)
- **共鳴**: 紫色漸層
- **推薦**: 綠色系
- **分歧**: 橙色系

### 動畫效果
- 淡入動畫 (`animate-fade-in`)
- 卡片 hover 縮放
- 按鈕過渡效果
- Loading 旋轉動畫

### 響應式設計
- 手機端: 單列/雙列佈局
- 平板端: 三列佈局
- 桌面端: 四/五列佈局
- 自適應標籤頁導航

## 🔧 技術實現

### 前端技術棧
- **React** + TypeScript
- **Tailwind CSS**: 樣式系統
- **Recharts**: 雷達圖視覺化
- **Lucide React**: 圖標庫

### 後端演算法
- **Cosine Similarity**: 計算向量相似度
- **Genre Profiling**: 建立用戶類型偏好檔案
- **Weighted Scoring**: 考慮評分和觀看頻率的加權

### 數據處理
```python
# 相似度計算
vec1 = [user1_profile.get(g, 0) for g in all_genres]
vec2 = [user2_profile.get(g, 0) for g in all_genres]
similarity = cosine_similarity(vec1, vec2) * 100

# 共同興趣強度（幾何平均）
combined_weight = (weight1 * weight2) ** 0.5
```

## 📱 使用流程

1. **輸入階段**
   - 輸入兩個 AniList 用戶名稱
   - 點擊「開始配對分析」按鈕

2. **載入階段**
   - 顯示 Loading 動畫
   - 後端抓取雙方完整動畫列表
   - 進行多維度數據分析

3. **結果展示**
   - 顯示整體配對分數和頭像
   - 展示統計對比卡片
   - 預設顯示「品味分析」標籤

4. **深入探索**
   - 切換不同標籤頁
   - 查看共同作品、推薦和分歧
   - 互動式圖表探索

## 🎯 評分等級說明

| 分數範圍 | 評語 | 顏色 |
|---------|------|------|
| 90-100 | 靈魂伴侶！你們的品味驚人地相似！ | 綠色 |
| 80-89 | 非常合拍！有很多共同話題。 | 綠色 |
| 60-79 | 還不錯，有些共同喜好。 | 黃色 |
| 40-59 | 品味有些差異，但可以互相推坑。 | 黃色 |
| 0-39 | 水火不容？或許是互補的關係！ | 紅色 |

## 🚀 未來擴展可能性

- [ ] 時間軸分析：同時期觀看的作品
- [ ] 製作公司偏好對比
- [ ] 聲優共鳴分析
- [ ] 季度/年度品味變化追蹤
- [ ] 多人配對（3+ 用戶）
- [ ] 匯出配對報告 (PDF/圖片)
- [ ] 社群分享功能
- [ ] 配對歷史記錄

## 💡 使用建議

- **找動畫伴**: 找到品味相近的朋友一起追番
- **互相推坑**: 利用推薦功能發現新作品
- **了解差異**: 通過分歧作品了解對方獨特品味
- **擴展視野**: 嘗試對方高分但自己未看的作品

## 🔒 隱私說明

- 僅分析公開的 AniList 資料
- 若用戶設定列表為私密，將無法進行分析
- 不儲存任何配對歷史記錄
- 所有計算即時進行

---

**開發團隊**: Soluna Project  
**最後更新**: 2024
**版本**: 2.0 Enhanced Edition