# 動漫動態回顧 (Recap) 功能說明

## 📖 功能概述

**動漫動態回顧** 是一個類似 YouTube Recap、Discord Recap 和 Spotify Wrapped 的功能，讓用戶可以回顧自己在 AniList 上的動漫觀看活動，並以動畫的方式呈現統計數據。

## ✨ 主要特色

### 1. 兩種模式
- **總覽模式**：顯示所有時間的統計數據
- **年份模式**：可選擇 2010-當前年份的特定年份回顧

### 2. 動畫展示
- 初次加載時自動播放 Recap 動畫（類似 Spotify Wrapped）
- 每個幻燈片停留 3 秒，自動切換
- 提供「跳過動畫」按鈕快速進入詳細頁面
- 提供「重播動畫」按鈕重新觀看動畫

### 3. 數據內容

#### 基本統計
- 總動漫數
- 總觀看集數
- 總觀看時長（小時）
- 完成數量

#### 狀態分布
- 完成（Completed）
- 觀看中（Watching）
- 計劃中（Planning）
- 暫停（Paused）
- 棄番（Dropped）
- 重看（Repeating）

#### 最愛作品 Top 10
- 根據用戶評分排序
- 顯示封面、標題、評分
- 點擊可跳轉到 AniList 頁面

#### 類型分布
- 顯示用戶最常觀看的動漫類型
- 以進度條視覺化呈現

#### 成就徽章
系統會根據用戶數據自動解鎖成就：
- 🏆 **百番達成**：完成 100 部以上動漫
- ⭐ **五十番達成**：完成 50 部以上動漫
- 📺 **集數大師**：觀看 1000 集以上
- ⏰ **時間旅行者**：花費 100 小時以上觀看動漫
- 💯 **慷慨的評論家**：平均評分 80 分以上
- 🎭 **類型專家**：特定類型觀看數量最多
- 💪 **永不放棄**：完成 10 部以上且沒有棄番記錄

## 🎬 動畫幻燈片順序

1. **歡迎頁面**：顯示 Recap 標題和用戶名稱
2. **觀看統計**：總動漫數、總集數、總時長
3. **完成紀錄**：完成數量和平均評分
4. **最愛 Top 5**：前五名最愛作品展示
5. **最愛類型**：用戶最常觀看的類型
6. **成就展示**：解鎖的成就徽章
7. **結束頁面**：感謝訊息

## 🚀 使用方法

### 前端操作
1. 在導航欄點擊「動態回顧」
2. 輸入 AniList 使用者名稱
3. 選擇模式：
   - 「總覽（所有時間）」：查看所有時間的統計
   - 選擇特定年份：查看該年度的統計
4. 點擊「生成我的 Recap」
5. 觀看動畫展示
6. 動畫結束後查看詳細數據

### 按鈕功能
- **跳過動畫**：在動畫播放時跳過，直接查看詳細數據
- **重播動畫**：在詳細頁面重新播放動畫
- **生成新的 Recap**：清空當前數據，重新輸入資料

## 📡 API 端點

### `POST /recap`

#### 請求格式
```json
{
  "username": "senba1000m3",
  "year": 2024  // 可選，null 或不提供則為總覽模式
}
```

#### 回應格式
```json
{
  "username": "senba1000m3",
  "year": 2024,
  "is_all_time": false,
  "total_anime": 50,
  "total_episodes": 600,
  "total_minutes": 14400,
  "total_hours": 240.0,
  "completed_count": 30": ["Action", "Drama", "Fantasy"],
      "format": "TV",
      "averageScore": 85,
      "year": 2013
    }
  ],
  "genre_distribution": {
    "Action": 20,
    "Drama": 15,
    "Fantasy": 10
  },
  "format_distribution": {
    "TV": 40,
    "MOVIE": 8,
    "OVA": 2
  },
  "average_score": 85.5,
  "total_scored": 45
